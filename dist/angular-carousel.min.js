/**
 * Angular Carousel - Mobile friendly touch carousel for AngularJS
 * @version v0.0.2 - 2013-04-24
 * @link http://revolunet.com.github.com/angular-carousel
 * @author Julien Bouquillon <julien@revolunet.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-carousel",[]).directive("carousel",["$document",function(t){var n=0;return{restrict:"A",scope:!0,controller:["$scope","$element","$attrs",function(t,n){var e=0,r=0;this.addElement=function(t){e++,1===e&&(r=t[0].getBoundingClientRect().width,n.parent().css("width",this.getWidth()-2+"px"))},this.removeElement=function(){e--},this.getWidth=function(){return r}}],compile:function(e){return e.addClass("carousel-slides"),e.find("li").attr("slide-announcer",!0),function(e,r,a,o){n++;var s="carousel-"+n,i=0,c=0,u=0,l=0,d=0,m=.1,f=r.wrap("<div id='"+s+"' class='carousel-container'></div>"),h=f.parent();h.getWidth=o.getWidth;var v=function(){return f.find("li")},p=function(){return v().length},g=function(t){return t.originalEvent!==void 0&&t.originalEvent.touches>0?t=t.originalEvent.touches[0]:t.touches!==void 0&&t.touches.length>0?t=t.touches[0]:t.changedTouches!==void 0&&t.changedTouches.length>0&&(t=t.changedTouches[0]),t},x=function(n){n=g(n),0===i&&(i=1,c=n.clientX),t.bind("mouseup",E)},b=function(t){if(0!==i){t.preventDefault(),t=g(t);var n=t.clientX-c;if(1===i&&0!==n)i=2,u=l;else if(2===i){var e=p(),r=1;(0===d&&t.clientX>c||d===e-1&&c>t.clientX)&&(r=3),l=u+n/r,f.css({"-webkit-transform":"translate3d("+l+"px,0,0)","-moz-transform":"translate3d("+l+"px,0,0)","-ms-transform":"translate3d("+l+"px,0,0)","-o-transform":"translate3d("+l+"px,0,0)",transform:"translate3d("+l+"px,0,0)"}).removeClass().addClass("carousel-noanimate")}}},E=function(n){t.unbind("mouseup",E),n=g(n);var e=p(),r=d;if(i>0){i=0,d=u>l?d+1:d-1,d=Math.min(Math.max(d,0),e-1);var a=h.getWidth(),o=n.clientX-c;a*m>=Math.abs(o)&&(d=r),l=d*-a,f.removeClass("carousel-noanimate").addClass("carousel-animate").css({"-webkit-transform":"translate3d("+l+"px,0,0)","-moz-transform":"translate3d("+l+"px,0,0)","-ms-transform":"translate3d("+l+"px,0,0)","-o-transform":"translate3d("+l+"px,0,0)",transform:"translate3d("+l+"px,0,0)"})}};h.bind("mousedown touchstart",x),h.bind("mousemove touchmove",b),h.bind("mouseup touchend",E),e.destroy=function(){}}}}}]).directive("slideAnnouncer",function(){return{restrict:"A",require:"^carousel",link:function(t,n,e,r){r&&(r.addElement(n),t.$on("$destroy",function(){r.removeElement(n)}))}}});